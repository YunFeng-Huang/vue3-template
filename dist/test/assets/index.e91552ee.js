var U=Object.defineProperty,P=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var A=(e,t,s)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,h=(e,t)=>{for(var s in t||(t={}))w.call(t,s)&&A(e,s,t[s]);if(T)for(var s of T(t))j.call(t,s)&&A(e,s,t[s]);return e},g=(e,t)=>P(e,C(t));import{r as G,c as N,a as $,b as V,o as y,d as x,e as M,E as u,f as q,V as J,N as E,g as _,h as W,i as H,j as K}from"./vendor.78f21d47.js";const Q=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=s(o);fetch(o.href,i)}};Q();var v={provide(){return{reload:this.reload}},data(){return{isRouterAlive:!0}},methods:{reload(){this.isRouterAlive=!1,this.$nextTick(function(){this.isRouterAlive=!0})}}};const z={class:"app"};function X(e,t,s,r,o,i){const a=G("router-view");return y(),N("div",z,[o.isRouterAlive?(y(),$(a,{key:0})):V("v-if",!0)])}v.render=X;const Z="modulepreload",B={},Y="./",l=function(t,s){return!s||s.length===0?t():Promise.all(s.map(r=>{if(r=`${Y}${r}`,r in B)return;B[r]=!0;const o=r.endsWith(".css"),i=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${i}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":Z,o||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),o)return new Promise((d,p)=>{a.addEventListener("load",d),a.addEventListener("error",p)})})).then(()=>t())},ee=()=>l(()=>import("./index.04d8b65f.js"),["assets/index.04d8b65f.js","assets/index.08245533.css","assets/vendor.78f21d47.js"]),te=()=>l(()=>import("./index.e0c557f8.js"),["assets/index.e0c557f8.js","assets/vendor.78f21d47.js"]),se=()=>l(()=>import("./index2.fc0caa80.js"),["assets/index2.fc0caa80.js","assets/vendor.78f21d47.js"]),re=()=>l(()=>import("./index3.674011d1.js"),["assets/index3.674011d1.js","assets/vendor.78f21d47.js"]),oe=()=>l(()=>import("./index4.14fbc466.js"),["assets/index4.14fbc466.js","assets/vendor.78f21d47.js"]),ne=()=>l(()=>import("./index5.42dd845a.js"),["assets/index5.42dd845a.js","assets/vendor.78f21d47.js"]),ie=[{path:"order",name:"order",component:ee,meta:{title:"\u8BA2\u5355\u7BA1\u7406"}},{path:"order1",name:"order1",component:te,meta:{title:"\u8BA2\u5355\u7BA1\u74061"}},{path:"order2",name:"order2",component:se,meta:{title:"\u8BA2\u5355\u7BA1\u74063"}},{path:"order3",name:"order3",component:re,meta:{title:"\u8BA2\u5355\u7BA1\u74063"}},{path:"order4",name:"order4",component:oe,meta:{title:"\u8BA2\u5355\u7BA1\u74064"}},{path:"order5",name:"order5",component:ne,meta:{title:"\u8BA2\u5355\u7BA1\u74065"}}],ae=()=>l(()=>import("./index.a07e70f5.js"),["assets/index.a07e70f5.js","assets/index.42e06973.css","assets/vendor.78f21d47.js"]),ue=()=>l(()=>import("./403.74fb31b0.js"),["assets/403.74fb31b0.js","assets/403.119395e1.css","assets/vendor.78f21d47.js","assets/cloud.2f5c1094.js"]),ce=()=>l(()=>import("./404.5f4f5370.js"),["assets/404.5f4f5370.js","assets/404.38ef40e2.css","assets/vendor.78f21d47.js","assets/cloud.2f5c1094.js"]),le=()=>l(()=>import("./index.823e4142.js"),["assets/index.823e4142.js","assets/index.717f71b1.css","assets/vendor.78f21d47.js"]),me=[{path:"/home",name:"home",component:le,meta:{title:"\u9996\u9875"},children:[{path:"403",meta:{title:"403"},name:"403",component:ue},{path:"404",meta:{title:"404"},name:"404",component:ce}]},{path:"/login",meta:{title:"login"},name:"login",component:ae}];let de=[...ie];const pe=[...de],m=x({history:M(),routes:me});function F(e,t,s){return e.map((r,o)=>{s&&(r.deep=s+"-"+(o+1)),r.children&&F(r.children,t,r.deep),t.push(r.path)})}function b(e,t,s){return e.map((r,o)=>{r.parent=s+"/"+r.title,r.children?b(r.children,t,r.parent):t.name==r.path&&(t.meta=g(h(h({},t.meta),r.meta),{title:r.title,breadcrumb:r.parent.slice(1)}))}),e}var n;(function(e){e.SETROUTERS="SETROUTERS",e.SETCRUBLIST="SETCRUBLIST",e.LOGIN="LOGIN",e.LOGOUT="LOGOUT",e.GETPERMISSTIONLIST="GETPERMISSTIONLIST",e.SETVALUE="SETVALUE",e.SETLOCALROUTER="SETLOCALROUTER"})(n||(n={}));function I(e,t){const s=window.JSON.stringify(t);window.sessionStorage.setItem(e,s)}function fe(e){let t;return t=window.sessionStorage.getItem(e),t&&(t=window.JSON.parse(t)),t}function he(e){window.sessionStorage.removeItem(e)}const ge={menuList:[],token:null,crumbList:[],deepActive:"",permissionList:[],localRouter:{},merchantUserModel:null},Ee={[n.SETVALUE](e,t){e[t.key]=t.value},[n.SETLOCALROUTER](e,t){e.localRouter[t.path]=t.name},[n.SETROUTERS](e,t){let s=[];F(t,s,"1"),s=[...new Set(s)],e.menuList=t,e.permissionList=s.filter(Boolean),I("store",JSON.stringify(e))},[n.SETCRUBLIST](e,t){const s=t.toString().split(/\//);e.crumbList=s},[n.LOGIN](e,t){e.token=t,console.log(e,"MUTATIONTYPES.LOGIN"),console.log(m.getRoutes(),"router"),u.closeAll(),m.push("/")},[n.LOGOUT](e){e.token=null,e.menuList=[],sessionStorage.clear(),m.replace("/login"),u.closeAll(),u({type:"success",message:"\u9000\u51FA\u6210\u529F"}),setTimeout(()=>{sessionStorage.clear()},2e3)}},_e={async[n.SETROUTERS]({commit:e,state:t,dispatch:s}){pe.forEach(r=>{t.permissionList.includes(r.name)&&(m.addRoute("home",r),m.options.routes[0].children.push(r))}),e(n.SETROUTERS,t.menuList)},async[n.LOGIN]({commit:e,dispatch:t},s){e(n.SETROUTERS,s),await t(n.SETROUTERS),e(n.LOGIN,"token")},async[n.LOGOUT]({commit:e}){e(n.LOGOUT)}},Le={menuList:e=>e.menuList,token:e=>e.token,crumbList:e=>e.crumbList,deepActive:e=>e.deepActive,permissionList:e=>e.permissionList,localRouter:e=>e.localRouter,merchantUserModel:e=>e.merchantUserModel};var Oe={state:ge,getters:Le,mutations:Ee,actions:_e,namespaced:!0},L;(function(e){e.TOGGLECOLLAPSE="TOGGLECOLLAPSE"})(L||(L={}));const Se={collapse:!1},Re={[L.TOGGLECOLLAPSE](e,t){e.collapse=t}},Te={},Ae={collapse:e=>e.collapse};var ye={state:Se,getters:Ae,mutations:Re,actions:Te,namespaced:!0};const ve=[q({})],c=new J.Store({plugins:ve,modules:{permission:Oe,setting:ye}});E.configure({showSpinner:!1});const Be=["login","404","403"];m.beforeEach((e,t,s)=>{console.log("beforeEach",e);const r=c.getters["permission/token"],o=c.getters["permission/permissionList"],i=o[0];E.start(),c.dispatch("permission/"+n.SETROUTERS).then(a=>{if(r)if(e.path==="/login"||e.path==="/")s({name:i});else if(m.hasRoute(e.name))s();else{const d=c.getters["permission/localRouter"];for(const p in d)if(Object.prototype.hasOwnProperty.call(d,p)){const R=d[p];p==e.path&&(e.name=R)}e.name==null&&s({name:"404"}),o.includes(e.name)?s(g(h({},e),{replace:!0})):s({name:"403"})}else Be.some((d,p,R)=>e.path.includes(d))?s():s({path:"/login",replace:!0})})});m.afterEach(e=>{console.log("afterEach",e),c.commit("permission/"+n.SETLOCALROUTER,e);const t=c.getters["permission/menuList"];b(t,e,""),e.meta&&e.meta.title&&(document.title=e.meta.title.toString()),e.meta&&e.meta.breadcrumb&&c.commit("permission/"+n.SETCRUBLIST,e.meta.breadcrumb),I("store",JSON.stringify(c.state)),E.done()});const k={login:"/api/manage/user/login",logout:"/api/manage/user/logout",permission:"/api/manage/user/permission",checkcode:"/api/manage/login/checkcode",merchants:"/api/manage/merchant/get_merchant_name_list",authSessionInit:"/api/manage/auth_session_init"};function Fe(e,t){return e.some(s=>s.url===t.url&&s.method===t.method&&be(s.params,t.params))}function be(e={},t={}){if(Object.keys(e).length!==Object.keys(t).length)return!1;let s=Object.keys(e);for(let r=0;r<s.length;r++)if(e[s[r]]!==t[s[r]])return!1;return!0}const Ie="1.0.0",f=_.create({timeout:1e3*30,withCredentials:!0,headers:{"Content-Type":"application/json;charset=UTF-8"}});let D,O=[];f.interceptors.request.use(function(e){return e.headers["client-version"]=Ie,e.headers["client-type"]="pcWeb",e.headers["client-page-path"]=location.href,e.cancelToken=new _.CancelToken(function(s){D=s}),Fe(O,e)?(u.closeAll(),u({type:"error",message:"\u8BF7\u52FF\u8FDE\u7EED\u70B9\u51FB"}),D("\u8BF7\u52FF\u8FDE\u7EED\u70B9\u51FB")):(O.push({url:e.url,method:e.method,params:e.data}),setTimeout(()=>{O=[]},2e3)),e},function(e){return Promise.reject(e)});f.interceptors.response.use(e=>{let t=e.data&&e.data.message?e.data.message:"\u8BF7\u6C42\u5931\u8D25";return e.status===200?e.data.success===!1?(e.data&&(u.closeAll(),t.includes("Query execution was interrupted")?u({type:"error",message:"\u76EE\u524D\u4F7F\u7528\u7684\u4EBA\u592A\u591A\u5566\uFF0C\u8BF7\u559D\u53E3\u8336\u518D\u6765\uFF01"}):u({type:"error",message:t})),Promise.reject(t)):e.data:(u.closeAll(),u({type:"error",message:t}),Promise.reject(t))},e=>{if(console.log(e,"err"),_.isCancel(e))return console.log("request cancel ",JSON.stringify(e)),Promise.reject(e);if(e&&e.response)switch(e.response.status){case 400:e.message="\u8BF7\u6C42\u51FA\u9519";break;case 401:u({type:"warning",message:"\u6388\u6743\u5931\u8D25\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55"}),c.dispatch("permission/LOGIN_OUT");return;case 403:e.message="\u62D2\u7EDD\u8BBF\u95EE";break;case 404:e.message="\u8BF7\u6C42\u9519\u8BEF,\u672A\u627E\u5230\u8BE5\u8D44\u6E90";break;case 500:e.message="\u670D\u52A1\u5668\u7AEF\u51FA\u9519";break;default:e.message="error"}else e.message="\u8FDE\u63A5\u670D\u52A1\u5668\u5931\u8D25";return u({type:"error",message:e.message}),Promise.reject(e)});var S=e=>"http://10.254.4.232"+e;let ke=e=>f({url:S(k.login),method:"post",data:e}),De=e=>f({url:S(k.logout),method:"post",data:e});var Ue={login:ke,logout:De};const Pe={order:"/api/manage/pay/query_pay_order"};let Ce=e=>f({url:S(Pe.order),method:"post",data:e});var we={order:Ce};const je={Login:Ue,Order:we};function Ge(e){return e.config.globalProperties.$api=je,e.config.globalProperties.$message=u,e.use(W),e}const Ne=H({setup:()=>{sessionStorage.getItem("store")&&(c.replaceState(Object.assign({},c.state,JSON.parse(fe("store")))),he("store"))},render:()=>K(v)});Ge(Ne).use(c).use(m).mount("#app");export{n as M,L as a,m as r,c as s};
